# clickhouse原理解析与应用实践-学习笔记

# 1. ClickHouse的前世今生

## 1.1 传统BI系统之殇

> + [ERP系统_百度百科 (baidu.com)](https://baike.baidu.com/item/ERP系统/1569198?fr=aladdin)
>
>   ERP系统是企业资源计划（Enterprise Resource Planning）的简称，是指建立在信息技术基础上，集信息技术与先进管理思想于一身，以系统化的[管理思想](https://baike.baidu.com/item/管理思想/2555826)，为企业员工及决策层提供决策手段的管理平台。
>
> + [客户关系管理（管理学词汇CRM）_百度百科 (baidu.com)](https://baike.baidu.com/item/客户关系管理/254554?fromtitle=CRM&fromid=165070&fr=aladdin)
>
>   客户关系管理是指[企业](https://baike.baidu.com/item/企业/707680)为提高核心竞争力，利用相应的信息技术以及[互联网技术](https://baike.baidu.com/item/互联网技术/617749)协调企业与顾客间在[销售](https://baike.baidu.com/item/销售/239410)、[营销](https://baike.baidu.com/item/营销/150434)和服务上的交互，从而提升其[管理方式](https://baike.baidu.com/item/管理方式/260899)，向客户提供创新式的个性化的客户交互和服务的过程。其最终目标是吸引新客户、保留老客户以及将已有客户转为忠实[客户](https://baike.baidu.com/item/客户/1598984)，增加市场。
>
> + [OLTP_百度百科 (baidu.com)](https://baike.baidu.com/item/OLTP/5019563?fr=aladdin)
>
>   On-Line Transaction Processing[联机事务处理](https://baike.baidu.com/item/联机事务处理)过程(OLTP)，也称为**面向交易的处理过程**，其基本特征是前台接收的用户数据可以立即传送到计算中心进行处理，并在很短的时间内给出处理结果，是对用户操作快速响应的方式之一。
>
> + [数据孤岛_百度百科 (baidu.com)](https://baike.baidu.com/item/数据孤岛/10305414?fr=aladdin)
>
>   数据孤岛在企业信息化中,还有很多类似的描述,如"数据的污染"等比较形象的说法，专业人士把数据孤岛分为物理性和逻辑性两种。**物理性的数据孤岛指的是，数据在不同部门相互独立存储，独立维护，彼此间相互孤立，形成了物理上的孤岛**。
>
> + [数据仓库_百度百科 (baidu.com)](https://baike.baidu.com/item/数据仓库/381916?fr=aladdin)
>
>   数据仓库，英文名称为Data Warehouse，可简写为[DW](https://baike.baidu.com/item/DW/1264123)或DWH。数据仓库，是为[企业](https://baike.baidu.com/item/企业/707680)所有级别的决策制定过程，提供所有类型数据支持的战略[集合](https://baike.baidu.com/item/集合)。它是单个数据存储，出于分析性报告和决策支持目的而创建。 为需要业务智能的企业，提供指导业务流程改进、监视时间、成本、质量以及控制。
>
> + [商业智能_百度百科 (baidu.com)](https://baike.baidu.com/item/商业智能/406141?fromtitle=BI&fromid=4579902&fr=aladdin)
>
>   商业智能（Business Intelligence，简称：BI），又称商业智慧或商务智能，指用现代[数据仓库技术](https://baike.baidu.com/item/数据仓库技术/10292797)、线上分析处理技术、数据挖掘和数据展现技术进行数据分析以实现商业价值。
>
>   商业智能的概念在1996年最早由[加特纳](https://baike.baidu.com/item/加特纳)集团（Gartner Group）提出，加特纳集团将商业智能定义为：商业智能描述了一系列的概念和方法，通过应用基于事实的支持系统来辅助商业决策的制定。商业智能技术提供使企业迅速分析数据的技术和方法，包括收集、管理和分析数据，将这些数据转化为有用的信息，然后分发到企业各处。
>
> + [联机分析处理_百度百科 (baidu.com)](https://baike.baidu.com/item/联机分析处理?fromtitle=OLAP&fromid=1049009)
>
>   联机分析处理OLAP是一种[软件技术](https://baike.baidu.com/item/软件技术/3313113)，它使分析人员能够迅速、一致、交互地从各个方面观察信息，以达到深入理解数据的目的。它具有FASMI(Fast Analysis of Shared Multidimensional Information)，即共享多维信息的快速分析的特征。其中F是快速性(Fast)，指系统能在数秒内对用户的多数分析要求做出反应；A是可分析性(Analysis)，指用户无需编程就可以定义新的专门计算，将其作为分析的一部 分，并以用户所希望的方式给出报告；M是多维性(Multi—dimensional)，指提供对[数据分析](https://baike.baidu.com/item/数据分析/6577123)的多维视图和分析；I是信息性(Information)，指能及时获得信息，并且管理大容量信息。

​	诸如ERP、CRM这类系统，可以看作<u>线下工作线上化</u>的过程，这也是IT时代的主要特征之一，通常我们把这类系统称为**联机事务处理（OLTP）**系统。

​	为了解决**数据孤岛**的问题，人们提出了**数据仓库**的概念。即通过引入一个专门用于分析类场景的数据库，将分散的数据统一汇聚到一处。借助数据仓库的概念，用户第一次拥有了站在企业全局鸟瞰一切数据的视角。

​	随着这个概念被进一步完善，<u>一类统一面向数据仓库，专注于提供数据分析、决策类功能的系统</u>与解决方案应运而生。最终于20世纪90年代，有人第一次提出了**BI（商业智能）**系统的概念。<u>自此以后，人们通常用BI一词指代这类分析系统</u>。相对于联机事务处理系统，我们把这类BI系统称为**联机分析（OLAP）系统**。

​	**传统BI系统**的设计初衷虽然很好，但实际的应用效果却不能完全令人满意。

+ 传统BI系统<u>对企业的信息化水平要求较高</u>。按照传统BI系统的设计思路，通常只有中大型企业才有能力实施。因为它的定位是站在企业视角通盘分析并辅助决策的，所以如果企业的信息化水平不高，基础设施不完善，想要实施BI系统根本无从谈起。这已然把许多潜在用户挡在了门外。
+ 狭小的受众制约了传统BI系统发展的生命力。传统BI系统的<u>主要受众是企业中的管理层或决策层</u>。这类用户虽然通常具有较高的话语权和决策权，但用户基数相对较小。同时他们对系统的参与度和使用度不高，久而久之这类所谓的BI系统就沦为了领导视察、演示的“特供系统”了。

+ <u>冗长的研发过程</u>滞后了需求的响应时效。传统BI系统需要大量IT人员的参与，用户的任何想法，哪怕小到只是想把一张用饼图展示的页面换成柱状图展示，可能都需要依靠IT人员来实现。一个分析需求从由用户大脑中产生到最终实现，可能需要几周甚至几个月的时间。这种严重的滞后性仿佛将人类带回到了飞鸽传书的古代。

## 1.2 现代BI系统的新思潮

